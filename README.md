# File System

Основная идея файловой системы:

`format <dir> <block_count>`:
 - Создает в директории `dir` `block_count` файлов - блоков, каждый размера 4096 байт и заполняет их нулями.
 - Первые несколько блоков (программно высчитывается, сколько) отводятся под таблицу занятости, она нам нужна для того, чтобы смотреть - какие блоки заняты, а какие свободны. Самым первым числом в первом блоке мы записываем номер блока, где будет располагаться корень нашей ФС. Далее в массиве блоков в каждой ячейке стоит номер блока, который следует читать после текущего (т.е. в котором хранится продолжение того материала, который мы видим в текущем блоке - продолжение файла, папки, таблицы занятости). Если текущий блок последний для храниения определенного материала - ссылка замыкается на него же. Свободные блоки в таблице занятости имеют значения -1.
 - Остальные блоки изначально заполнены нулями, мы записали, что root будет находиться в первом свободном блоке после таблицы занятости.
 
`mkdir <dir> <target_dir>`:
- Проходит по переданному пути, проверяет, что путь корректен и что директории или файла с таким названием еще не было и создает по указанному пути директорию (и ей выделяется для хранения материалов какой-то свободный блок).

`import <dir> <local_file> <target_file>`:
- Проверяет, что родительский каталог задан корректно и что директории или файла с таким названием нет, создает файл и копирует в него содержимое `local_file` (расширяется по мере необходимости на несколько блоков).

`export <dir> <target_file> <local_file>`:
- Проверяет, что файл по такому пути вообще существует и копирует его содержимое в `local_file`.

`rmdir <dir> <target_dir>`:
- Проверяет, что директория с названием `target_dir` существует по указанному пути и пуста, затем удалаяет ее.

`rm <dir> <target_file>`:
- Проверяет, что файл с названием `<target_file>` существует по указанному пути и удаляет его.

`ls <dir> <target_dir>`:
- Проверяет, что директория по указанному пути существует и выводит на экран ее содержимое.




